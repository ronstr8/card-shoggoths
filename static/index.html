<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Shoggoths</title>

    <script defer src="js/app.js?v=5"></script>
    <link rel="stylesheet" href="css/style.css">

    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/favicon/site.webmanifest" />
</head>

<body>
    <audio id="ambient" autoplay loop>
        <source src="/audio/creepy-loop.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <h1>Card Shoggoths</h1>

    <div id="game-container">
        <!-- Scoreboard (Both Sanity Bars) -->
        <div id="scoreboard">
            <div class="sanity-row">
                <div class="sanity-label">Ancient One</div>
                <div class="sanity-bar-container compact">
                    <div class="sanity-bar" id="opponent-sanity-bar"></div>
                </div>
                <span class="sanity-text" id="opponent-sanity-text">100</span>
                <span class="sanity-emoji" id="opponent-sanity-emoji">ðŸ˜Š</span>
            </div>
            <div class="sanity-row">
                <div class="sanity-label">You</div>
                <div class="sanity-bar-container compact">
                    <div class="sanity-bar" id="player-sanity-bar"></div>
                </div>
                <span class="sanity-text" id="player-sanity-text">100</span>
                <span class="sanity-emoji" id="player-sanity-emoji">ðŸ˜Š</span>
            </div>
        </div>

        <!-- Hands -->
        <div id="opponent-hand" class="hand compact-hand"></div>
        <div id="player-hand" class="hand compact-hand"></div>

        <!-- Result Message -->
        <div id="result"></div>

        <!-- Action Bar (Pot Left, Controls Right) -->
        <div id="action-bar">
            <div id="pot-display-compact">
                <span>POT: </span><span id="pot-amount">0</span> ðŸ§ 
            </div>

            <div class="controls compact-controls">
                <button id="deal-btn" onclick="deal()">Deal</button>
                <div id="betting-controls">
                    <button id="fold-btn" onclick="fold()" disabled>Fold</button>
                    <input type="number" id="bet-amount" value="10" min="1" max="100" disabled>
                    <button id="bet-btn" onclick="placeBet()" disabled>Bet</button>
                </div>
                <button id="discard-btn" onclick="submitDiscard()" disabled>Discard</button>
                <button id="showdown-btn" onclick="showdown()" disabled>Reveal</button>
                <button id="esp-btn" onclick="startESP()">ðŸ”® ESP</button>
            </div>
        </div>
    </div>
    </div>

    <!-- Chat Box -->
    <div id="chat-container">
        <div id="chat-header">ðŸ¦‘ Ancient One</div>
        <div id="chat-messages"></div>
    </div>

    <!-- Game Over Overlay -->
    <div id="game-over-overlay" class="overlay hidden">
        <div class="overlay-content">
            <div class="giant-emoji">ðŸ« </div>
            <h2>Sanity Depleted</h2>
            <p>Your mind has unraveled.</p>
            <button id="rebuy-btn" onclick="rebuy()">Rebuy YOUR SOUL</button>
        </div>
    </div>

    <!-- ESP Training Overlay -->
    <div id="esp-overlay" class="overlay hidden">
        <div class="overlay-content esp-content">
            <h2>ðŸ”® ESP Training</h2>
            <p>Find the matching pair!</p>
            <div id="esp-hand1" class="hand esp-hand"></div>
            <div id="esp-hand2" class="hand esp-hand"></div>
            <div id="esp-result"></div>
            <div class="esp-controls">
                <button id="esp-guess-btn" onclick="submitESPGuess()" disabled>Match!</button>
                <button id="esp-exit-btn" onclick="exitESP()">Exit</button>
            </div>
        </div>
    </div>
</body>

</html>